import"./DsnmJJEf.js";import{o as K,s as O}from"./BKI5iZRW.js";import{p as w,f as y,M as z,b as m,c as A,d as p,r as u,h as _,u as T,a as H,s as P,e as Q,N as R,t as U}from"./DtM-i9bb.js";import{r as D,i as V}from"./D4Qr-cMn.js";import{e as W}from"./CYdYxwiD.js";import{i as S,a as E,d as X,C as Y}from"./DfEBmUMg.js";import{p as C}from"./DOWCsYJq.js";import{r as Z}from"./3iz3eF5K.js";import{i as $,H as ee}from"./CovulHXZ.js";import{d as L,a as te}from"./BEXxvxpF.js";const M=S(),x=S(()=>0),b=S();var se=y("<section><!></section>");function ve(l,e){w(e,!0);const h=D(e,["$$slots","$$events","$$legacy","children"]),t=L.get(),n=x.get()+1;x.set(n);const i=b.get_maybe(),f=t.generate_section_id();b.set(f);let r;M.set(a=>(r=a,i));var s=se();E(s,()=>({...h}));var c=p(s);z(c,()=>e.children),u(s),X(s,()=>$(()=>({intersecting:a})=>{r&&(a?t.fragments_onscreen.add(r):t.fragments_onscreen.delete(r))})),m(l,s),A()}var ae=y('<div class="flex:1"><!></div> <!>',1),re=y("<header><!></header>");function ge(l,e){w(e,!0);const h=D(e,["$$slots","$$events","$$legacy","text","tag","children"]),t=T(()=>te(e.text)),v=M.get();if(!v)throw Error("TomeSectionHeader must be a child of TomeSection");const n=L.get(),i=x.get(),f=T(()=>e.tag??(i===1?"h2":i===2?"h3":"h4")),r=b.get(),s=v(_(t));let c;C.url.pathname!==Z(n.root_path)&&(c=n.add(_(t),e.text,C.url.pathname,_(f),i,s,r)),K(()=>{c&&n.remove(c)});var a=re(),N=p(a);W(N,()=>_(f),!1,(j,q)=>{E(j,()=>({...h,[Y]:{tome_section_header:!0}}),void 0,void 0,void 0,"svelte-dz8ld7");var k=ae(),g=H(k),B=p(g);{var F=o=>{var d=Q(),J=H(d);z(J,()=>e.children),m(o,d)},G=o=>{var d=R();U(()=>O(d,e.text)),m(o,d)};V(B,o=>{e.children?o(F):o(G,!1)})}u(g);var I=P(g,2);ee(I,{get fragment(){return _(t)}}),m(q,k)}),u(a),m(l,a),A()}export{ve as T,ge as a};
